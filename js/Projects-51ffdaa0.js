import{_ as a,af as e,h as t,s as l,c as s,i,l as c,Y as n,r as d,j as o,o as r,a as v,X as u,b as p,e as g,w as m,t as f,k as h,F as y,g as _,d as b,I as j,f as k,ag as C,Z as w,ah as V,ai as z,aj as x,ak as F,al as N,B as U,N as D,V as I,T as P,W as S}from"./index-37d95f7e.js";const T={class:"projects-page"},Y={class:"page-content"},B={class:"container"},L={class:"filter-section"},R={class:"filter-card"},W={class:"filter-row"},X={class:"filter-left"},Z={class:"filter-right"},$={class:"stats-section"},q={class:"stats-grid"},A={class:"stat-item stat-primary"},E={class:"stat-icon"},G={class:"stat-content"},H={class:"stat-number"},J={class:"stat-item stat-success"},K={class:"stat-icon"},M={class:"stat-content"},O={class:"stat-number"},Q={class:"stat-item stat-info"},aa={class:"stat-icon"},ea={class:"stat-content"},ta={class:"stat-number"},la={class:"stat-item stat-warning"},sa={class:"stat-icon"},ia={class:"stat-content"},ca={class:"stat-number"},na={class:"projects-section"},da={key:0,class:"empty-state"},oa={class:"empty-illustration"},ra={key:1,class:"projects-grid"},va=["onClick"],ua={class:"project-image-wrapper"},pa={class:"project-image"},ga=["src","alt"],ma={key:1,class:"default-image"},fa={class:"placeholder-pattern"},ha={class:"pattern-grid"},ya={class:"placeholder-icon"},_a={class:"project-badges"},ba={class:"project-content"},ja={class:"project-header"},ka={class:"project-title"},Ca={class:"project-description"},wa={class:"project-meta"},Va={class:"meta-item"},za={class:"meta-icon"},xa={class:"meta-content"},Fa={class:"meta-value"},Na={key:0,class:"meta-item"},Ua={class:"meta-icon"},Da={class:"meta-content"},Ia={class:"meta-value"},Pa={class:"project-timeline"},Sa={class:"timeline-icon"},Ta={class:"timeline-content"},Ya={class:"timeline-date"},Ba={class:"timeline-date"},La={class:"project-footer"},Ra={class:"funding-info"},Wa={key:2,class:"pagination-section"},Xa=a({__name:"Projects",setup(a){const Xa=e(),Za=t(!1),$a=t([]),qa=t(""),Aa=t(""),Ea=t(""),Ga=l({page:1,limit:12,total:0});let Ha=null;const Ja=s(()=>$a.value.length),Ka=s(()=>$a.value.filter(a=>"ongoing"===a.status).length),Ma=s(()=>$a.value.filter(a=>"completed"===a.status).length),Oa=s(()=>$a.value.reduce((a,e)=>a+(parseFloat(e.funding_amount)||0),0));i(()=>{Qa()});const Qa=async()=>{var a;try{Za.value=!0;const e={page:Ga.page,limit:Ga.limit};Aa.value&&(e.category=Aa.value),Ea.value&&(e.status=Ea.value),qa.value&&(e.search=qa.value);const t=await c.get("/projects",{params:e});t&&t.data&&($a.value=t.data.projects||[],Ga.total=(null==(a=t.data.pagination)?void 0:a.total)||0)}catch(e){console.error("加载项目列表失败:",e),n.error("加载项目列表失败")}finally{Za.value=!1}},ae=()=>{Ha&&clearTimeout(Ha),Ha=setTimeout(()=>{Ga.page=1,Qa()},500)},ee=a=>{Ga.limit=a,Ga.page=1,Qa()},te=a=>{Ga.page=a,Qa()},le=a=>{Xa.push(`/projects/${a.id}`)},se=a=>({national:"国家级",provincial:"省部级",institutional:"校级",enterprise:"企业合作",international:"国际合作"}[a]||a),ie=a=>({ongoing:"进行中",completed:"已完成",suspended:"暂停"}[a]||a),ce=a=>{if(!a)return"未设定";return new Date(a).toLocaleDateString("zh-CN")},ne=a=>(a=>a?new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0}).format(a):"0")(a);return(a,e)=>{const t=d("el-icon"),l=d("el-input"),s=d("el-option"),i=d("el-select"),c=d("el-button"),n=d("el-tag"),Xa=d("el-pagination"),Ha=o("loading");return r(),v("div",T,[e[17]||(e[17]=u('<div class="page-header" data-v-c45a65ec><div class="header-overlay" data-v-c45a65ec></div><div class="header-pattern" data-v-c45a65ec></div><div class="container" data-v-c45a65ec><div class="header-content" data-v-c45a65ec><div class="title-wrapper" data-v-c45a65ec><h1 class="page-title" data-v-c45a65ec>研究项目</h1><p class="page-subtitle" data-v-c45a65ec>Research Projects</p><p class="page-description" data-v-c45a65ec>探索前沿科技，创新驱动未来</p></div><div class="header-decoration" data-v-c45a65ec><div class="decoration-circle circle-1" data-v-c45a65ec></div><div class="decoration-circle circle-2" data-v-c45a65ec></div><div class="decoration-circle circle-3" data-v-c45a65ec></div></div></div></div></div>',1)),p("div",Y,[p("div",B,[p("div",L,[p("div",R,[p("div",W,[p("div",X,[g(l,{modelValue:qa.value,"onUpdate:modelValue":e[0]||(e[0]=a=>qa.value=a),placeholder:"搜索项目标题、关键词或负责人...",class:"search-input",clearable:"",onInput:ae},{prefix:m(()=>[g(t,{class:"search-icon"},{default:m(()=>[g(j(w))]),_:1})]),_:1},8,["modelValue"])]),p("div",Z,[g(i,{modelValue:Aa.value,"onUpdate:modelValue":e[1]||(e[1]=a=>Aa.value=a),placeholder:"项目类别",clearable:"",class:"filter-select",onChange:Qa},{default:m(()=>[g(s,{label:"国家级",value:"national"}),g(s,{label:"省部级",value:"provincial"}),g(s,{label:"校级",value:"institutional"}),g(s,{label:"企业合作",value:"enterprise"}),g(s,{label:"国际合作",value:"international"})]),_:1},8,["modelValue"]),g(i,{modelValue:Ea.value,"onUpdate:modelValue":e[2]||(e[2]=a=>Ea.value=a),placeholder:"项目状态",clearable:"",class:"filter-select",onChange:Qa},{default:m(()=>[g(s,{label:"进行中",value:"ongoing"}),g(s,{label:"已完成",value:"completed"}),g(s,{label:"暂停",value:"suspended"})]),_:1},8,["modelValue"])])])])]),p("div",$,[p("div",q,[p("div",A,[p("div",E,[g(t,null,{default:m(()=>[g(j(V))]),_:1})]),p("div",G,[p("div",H,f(Ja.value),1),e[5]||(e[5]=p("div",{class:"stat-label"},"总项目数",-1))])]),p("div",J,[p("div",K,[g(t,null,{default:m(()=>[g(j(z))]),_:1})]),p("div",M,[p("div",O,f(Ka.value),1),e[6]||(e[6]=p("div",{class:"stat-label"},"进行中",-1))])]),p("div",Q,[p("div",aa,[g(t,null,{default:m(()=>[g(j(x))]),_:1})]),p("div",ea,[p("div",ta,f(Ma.value),1),e[7]||(e[7]=p("div",{class:"stat-label"},"已完成",-1))])]),p("div",la,[p("div",sa,[g(t,null,{default:m(()=>[g(j(F))]),_:1})]),p("div",ia,[p("div",ca,f(ne(Oa.value)),1),e[8]||(e[8]=p("div",{class:"stat-label"},"总资助金额",-1))])])])]),h((r(),v("div",na,[0!==$a.value.length||Za.value?(r(),v("div",ra,[(r(!0),v(y,null,_($a.value,a=>{return r(),v("div",{key:a.id,class:"project-card",onClick:e=>le(a)},[p("div",ua,[p("div",pa,[a.cover_image?(r(),v("img",{key:0,src:a.cover_image,alt:a.title},null,8,ga)):(r(),v("div",ma,[p("div",fa,[p("div",ha,[(r(),v(y,null,_(16,a=>p("div",{key:a,class:"grid-item"})),64))]),p("div",ya,[g(t,null,{default:m(()=>[g(j(U))]),_:1})])])])),e[12]||(e[12]=p("div",{class:"image-overlay"},null,-1))]),p("div",_a,[g(n,{type:(s=a.status,{ongoing:"success",completed:"info",suspended:"warning"}[s]||""),class:"status-badge",effect:"dark"},{default:m(()=>[k(f(ie(a.status)),1)]),_:2},1032,["type"]),g(n,{type:(l=a.category,{national:"danger",provincial:"warning",institutional:"info",enterprise:"success",international:"primary"}[l]||""),class:"category-badge"},{default:m(()=>[k(f(se(a.category)),1)]),_:2},1032,["type"])])]),p("div",ba,[p("div",ja,[p("h3",ka,f(a.title),1)]),p("p",Ca,f(a.description||"暂无项目描述"),1),p("div",wa,[p("div",Va,[p("div",za,[g(t,null,{default:m(()=>[g(j(D))]),_:1})]),p("div",xa,[e[13]||(e[13]=p("div",{class:"meta-label"},"负责人",-1)),p("div",Fa,f(a.principal_investigator||"未设定"),1)])]),a.funding_amount?(r(),v("div",Na,[p("div",Ua,[g(t,null,{default:m(()=>[g(j(F))]),_:1})]),p("div",Da,[e[14]||(e[14]=p("div",{class:"meta-label"},"资助金额",-1)),p("div",Ia,f(ne(a.funding_amount)),1)])])):b("",!0)]),p("div",Pa,[p("div",Sa,[g(t,null,{default:m(()=>[g(j(I))]),_:1})]),p("div",Ta,[p("span",Ya,f(ce(a.start_date)),1),e[15]||(e[15]=p("span",{class:"timeline-separator"},"-",-1)),p("span",Ba,f(ce(a.end_date)),1)])]),p("div",La,[p("div",Ra,[g(t,null,{default:m(()=>[g(j(P))]),_:1}),p("span",null,f(a.funding_agency||"未设定资助机构"),1)]),g(c,{type:"primary",class:"detail-btn",onClick:C(e=>le(a),["stop"])},{default:m(()=>[e[16]||(e[16]=k(" 查看详情 ",-1)),g(t,{class:"btn-icon"},{default:m(()=>[g(j(S))]),_:1})]),_:1},8,["onClick"])])])],8,va);var l,s}),128))])):(r(),v("div",da,[p("div",oa,[g(t,null,{default:m(()=>[g(j(N))]),_:1})]),e[10]||(e[10]=p("h3",null,"暂无项目数据",-1)),e[11]||(e[11]=p("p",null,"还没有添加任何研究项目",-1)),g(c,{type:"primary",onClick:Qa},{default:m(()=>[...e[9]||(e[9]=[k("刷新页面",-1)])]),_:1})])),Ga.total>0?(r(),v("div",Wa,[g(Xa,{"current-page":Ga.page,"onUpdate:currentPage":e[3]||(e[3]=a=>Ga.page=a),"page-size":Ga.limit,"onUpdate:pageSize":e[4]||(e[4]=a=>Ga.limit=a),total:Ga.total,"page-sizes":[12,24,48],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ee,onCurrentChange:te,background:""},null,8,["current-page","page-size","total"])])):b("",!0)])),[[Ha,Za.value]])])])])}}},[["__scopeId","data-v-c45a65ec"]]);export{Xa as default};
