import{_ as a,h as e,s as l,c as s,i as t,r as i,j as n,o as c,a as u,b as o,e as d,w as r,t as p,d as m,k as v,F as g,g as y,l as f,Y as _,I as h,K as k,f as b,ag as q,Z as z,P as w,az as C,U as V,D as x,V as D,N as S}from"./index-6c08d828.js";const U={class:"equipment-page"},E={class:"container"},F={class:"filter-toolbar"},N={class:"filter-left"},j={class:"filter-right"},I={key:0,class:"stats-section"},L={class:"stats-item stats-item-1"},P={class:"stats-icon"},T={class:"stats-content"},Y={class:"stats-number"},K={class:"stats-item stats-item-2"},Z={class:"stats-icon"},A={class:"stats-content"},B={class:"stats-number"},G={class:"stats-item stats-item-3"},H={class:"stats-icon"},J={class:"stats-content"},M={class:"stats-number"},O={class:"equipment-list"},Q={key:0,class:"equipment-grid"},R=["onClick"],W={class:"equipment-image"},X=["src","alt"],$={key:1,class:"no-image"},aa={class:"equipment-badges"},ea={class:"equipment-info"},la={class:"equipment-name"},sa={class:"equipment-model"},ta={class:"equipment-manufacturer"},ia={class:"equipment-meta"},na={key:0,class:"location"},ca={key:1,class:"purchase-date"},ua={key:2,class:"contact"},oa={class:"equipment-description"},da={key:1,class:"equipment-table"},ra=["onClick"],pa={class:"equipment-basic"},ma={class:"equipment-image-small"},va=["src","alt"],ga={class:"equipment-details"},ya={class:"equipment-specs"},fa={class:"model"},_a={class:"manufacturer"},ha={class:"description"},ka={class:"equipment-actions"},ba={key:0,class:"location"},qa={key:2,class:"empty-state"},za={key:1,class:"pagination-container"},wa={key:0,class:"equipment-detail"},Ca={class:"detail-header"},Va={class:"detail-image"},xa=["src","alt"],Da={key:1,class:"no-image-large"},Sa={class:"detail-info"},Ua={class:"detail-meta"},Ea={class:"meta-item"},Fa={class:"value"},Na={class:"meta-item"},ja={class:"value"},Ia={class:"meta-item"},La={class:"meta-item"},Pa={class:"value"},Ta={class:"meta-item"},Ya={class:"value"},Ka={class:"detail-content"},Za={key:0,class:"detail-section"},Aa={key:1,class:"detail-section"},Ba={class:"specifications"},Ga={key:2,class:"detail-section"},Ha={key:3,class:"detail-section"},Ja={key:4,class:"detail-section"},Ma={class:"price-info"},Oa=a({__name:"Equipment",setup(a){const Oa=e(!1),Qa=e([]),Ra=e([]),Wa=e("card"),Xa=e(!1),$a=e(null),ae=l({search:"",category:""}),ee=l({page:1,limit:12,total:0});let le=null;const se=s(()=>new Set(Qa.value.map(a=>a.category)).size),te=s(()=>new Set(Qa.value.map(a=>a.manufacturer).filter(a=>a)).size),ie=async()=>{try{Oa.value=!0;const a={page:ee.page,limit:ee.limit,sort:"sort_order",order:"DESC",...ae},e=await f.get("/equipment/list",{params:a});e.data&&(Qa.value=e.data||[]),e.pagination&&(ee.total=e.pagination.total,ee.page=e.pagination.page,ee.limit=e.pagination.limit)}catch(a){console.error("加载设备列表失败:",a),_.error("加载设备列表失败")}finally{Oa.value=!1}},ne=()=>{le&&clearTimeout(le),le=setTimeout(()=>{ee.page=1,ie()},500)},ce=a=>{$a.value=a,Xa.value=!0},ue=a=>{a.target.style.display="none"},oe=a=>({active:"正常",maintenance:"维修中",inactive:"停用"}[a]||a);return t(()=>{ie(),(async()=>{try{const a=await f.get("/equipment/stats/categories");a.data&&(Ra.value=a.data||[])}catch(a){console.error("加载分类失败:",a)}})()}),(a,e)=>{var l;const s=i("el-icon"),t=i("el-input"),f=i("el-option"),_=i("el-select"),le=i("el-tag"),de=i("el-button"),re=i("el-empty"),pe=i("el-pagination"),me=i("el-dialog"),ve=n("loading");return c(),u("div",U,[e[23]||(e[23]=o("div",{class:"equipment-header"},[o("div",{class:"container"},[o("h1",null,"设备资源"),o("p",null,"实验室仪器设备与技术平台展示")])],-1)),o("div",E,[o("div",F,[o("div",N,[d(t,{modelValue:ae.search,"onUpdate:modelValue":e[0]||(e[0]=a=>ae.search=a),placeholder:"搜索设备名称、型号、厂商...",style:{width:"300px"},clearable:"",onInput:ne},{prefix:r(()=>[d(s,null,{default:r(()=>[d(h(z))]),_:1})]),_:1},8,["modelValue"])]),o("div",j,[d(_,{modelValue:ae.category,"onUpdate:modelValue":e[1]||(e[1]=a=>ae.category=a),placeholder:"选择分类",clearable:"",style:{width:"150px"},onChange:ie},{default:r(()=>[(c(!0),u(g,null,y(Ra.value,a=>(c(),k(f,{key:a.category,label:a.category,value:a.category},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),d(_,{modelValue:Wa.value,"onUpdate:modelValue":e[2]||(e[2]=a=>Wa.value=a),style:{width:"120px"}},{default:r(()=>[d(f,{label:"卡片视图",value:"card"}),d(f,{label:"列表视图",value:"list"})]),_:1},8,["modelValue"])])]),Oa.value?m("",!0):(c(),u("div",I,[o("div",L,[o("div",P,[d(s,null,{default:r(()=>[d(h(w))]),_:1})]),o("div",T,[o("span",Y,p(ee.total),1),e[6]||(e[6]=o("span",{class:"stats-label"},"设备总数",-1))]),e[7]||(e[7]=o("div",{class:"stats-decoration"},null,-1))]),o("div",K,[o("div",Z,[d(s,null,{default:r(()=>[d(h(C))]),_:1})]),o("div",A,[o("span",B,p(se.value),1),e[8]||(e[8]=o("span",{class:"stats-label"},"设备分类",-1))]),e[9]||(e[9]=o("div",{class:"stats-decoration"},null,-1))]),o("div",G,[o("div",H,[d(s,null,{default:r(()=>[d(h(V))]),_:1})]),o("div",J,[o("span",M,p(te.value),1),e[10]||(e[10]=o("span",{class:"stats-label"},"合作厂商",-1))]),e[11]||(e[11]=o("div",{class:"stats-decoration"},null,-1))])])),v((c(),u("div",O,["card"===Wa.value?(c(),u("div",Q,[(c(!0),u(g,null,y(Qa.value,a=>{var e,l,t,i;return c(),u("div",{key:a.id,class:"equipment-card",onClick:e=>ce(a)},[o("div",W,[a.image_url?(c(),u("img",{key:0,src:a.image_url,alt:a.name,onError:ue},null,40,X)):(c(),u("div",$,[d(s,null,{default:r(()=>[d(h(w))]),_:1})])),o("div",aa,[d(le,{size:"small",type:"info"},{default:r(()=>[b(p(a.category),1)]),_:2},1024),a.status?(c(),k(le,{key:0,size:"small",type:(i=a.status,{active:"success",maintenance:"warning",inactive:"danger"}[i]||"info")},{default:r(()=>[b(p(oe(a.status)),1)]),_:2},1032,["type"])):m("",!0)])]),o("div",ea,[o("h3",la,p(a.name),1),o("p",sa,p(a.model),1),o("p",ta,p(a.manufacturer),1),o("div",ia,[a.location?(c(),u("span",na,[d(s,null,{default:r(()=>[d(h(x))]),_:1}),b(" "+p(a.location),1)])):m("",!0),a.purchase_date?(c(),u("span",ca,[d(s,null,{default:r(()=>[d(h(D))]),_:1}),b(" "+p((t=a.purchase_date,t?new Date(t).getFullYear():""))+"年 ",1)])):m("",!0),a.contact_person?(c(),u("span",ua,[d(s,null,{default:r(()=>[d(h(S))]),_:1}),b(" "+p(a.contact_person),1)])):m("",!0)]),o("p",oa,p(null==(e=a.description)?void 0:e.substring(0,80))+p((null==(l=a.description)?void 0:l.length)>80?"...":""),1)])],8,R)}),128))])):(c(),u("div",da,[(c(!0),u(g,null,y(Qa.value,a=>(c(),u("div",{key:a.id,class:"equipment-row",onClick:e=>ce(a)},[o("div",pa,[o("div",ma,[a.image_url?(c(),u("img",{key:0,src:a.image_url,alt:a.name,onError:ue},null,40,va)):(c(),k(s,{key:1},{default:r(()=>[d(h(w))]),_:1}))]),o("div",ga,[o("h3",null,p(a.name),1),o("div",ya,[o("span",fa,p(a.model),1),o("span",_a,p(a.manufacturer),1),d(le,{size:"small"},{default:r(()=>[b(p(a.category),1)]),_:2},1024)]),o("p",ha,p(a.description),1)])]),o("div",ka,[a.location?(c(),u("span",ba,[d(s,null,{default:r(()=>[d(h(x))]),_:1}),b(" "+p(a.location),1)])):m("",!0),d(de,{type:"primary",size:"small",onClick:q(e=>ce(a),["stop"])},{default:r(()=>[...e[12]||(e[12]=[b(" 查看详情 ",-1)])]),_:1},8,["onClick"])])],8,ra))),128))])),Oa.value||0!==Qa.value.length?m("",!0):(c(),u("div",qa,[d(re,{description:"暂无设备数据"})]))])),[[ve,Oa.value]]),ee.total>0?(c(),u("div",za,[d(pe,{"current-page":ee.page,"onUpdate:currentPage":e[3]||(e[3]=a=>ee.page=a),"page-size":ee.limit,"onUpdate:pageSize":e[4]||(e[4]=a=>ee.limit=a),"page-sizes":[12,24,36,48],total:ee.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ie,onCurrentChange:ie},null,8,["current-page","page-size","total"])])):m("",!0)]),d(me,{modelValue:Xa.value,"onUpdate:modelValue":e[5]||(e[5]=a=>Xa.value=a),title:null==(l=$a.value)?void 0:l.name,width:"800px","destroy-on-close":""},{default:r(()=>{return[$a.value?(c(),u("div",wa,[o("div",Ca,[o("div",Va,[$a.value.image_url?(c(),u("img",{key:0,src:$a.value.image_url,alt:$a.value.name},null,8,xa)):(c(),u("div",Da,[d(s,null,{default:r(()=>[d(h(w))]),_:1})]))]),o("div",Sa,[o("h2",null,p($a.value.name),1),o("div",Ua,[o("div",Ea,[e[13]||(e[13]=o("span",{class:"label"},"型号:",-1)),o("span",Fa,p($a.value.model||"未提供"),1)]),o("div",Na,[e[14]||(e[14]=o("span",{class:"label"},"厂商:",-1)),o("span",ja,p($a.value.manufacturer||"未提供"),1)]),o("div",Ia,[e[15]||(e[15]=o("span",{class:"label"},"分类:",-1)),d(le,null,{default:r(()=>[b(p($a.value.category),1)]),_:1})]),o("div",La,[e[16]||(e[16]=o("span",{class:"label"},"位置:",-1)),o("span",Pa,p($a.value.location||"未提供"),1)]),o("div",Ta,[e[17]||(e[17]=o("span",{class:"label"},"购买时间:",-1)),o("span",Ya,p((l=$a.value.purchase_date,(l?new Date(l).toLocaleDateString("zh-CN"):"")||"未提供")),1)])])])]),o("div",Ka,[$a.value.description?(c(),u("div",Za,[e[18]||(e[18]=o("h3",null,"设备描述",-1)),o("p",null,p($a.value.description),1)])):m("",!0),$a.value.specifications?(c(),u("div",Aa,[e[19]||(e[19]=o("h3",null,"技术规格",-1)),o("p",Ba,p($a.value.specifications),1)])):m("",!0),$a.value.usage_notes?(c(),u("div",Ga,[e[20]||(e[20]=o("h3",null,"使用说明",-1)),o("p",null,p($a.value.usage_notes),1)])):m("",!0),$a.value.contact_person?(c(),u("div",Ha,[e[21]||(e[21]=o("h3",null,"联系人",-1)),o("p",null,p($a.value.contact_person),1)])):m("",!0),$a.value.price?(c(),u("div",Ja,[e[22]||(e[22]=o("h3",null,"设备价值",-1)),o("p",Ma,"¥"+p((a=$a.value.price,a?Number(a).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00")),1)])):m("",!0)])])):m("",!0)];var a,l}),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-e3131a5c"]]);export{Oa as default};
