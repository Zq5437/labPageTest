import{_ as a,af as e,h as t,s,c as l,i,r as d,j as n,o as c,a as r,X as o,b as v,e as p,w as u,F as f,g as h,d as g,k as w,t as y,l as m,Y as b,I as x,J as k,f as C,Z as _,M as V,V as z,N as L,a0 as M,ax as j}from"./index-37d95f7e.js";const B={class:"news-page"},H={class:"container"},D={class:"filter-toolbar"},G={class:"filter-left"},U={class:"filter-right"},I={key:0,class:"top-news-section"},N={class:"section-title"},S={class:"title-icon"},W={class:"top-news-grid"},Z=["onClick"],E={class:"news-image-wrapper"},T={class:"news-image"},$=["src","alt"],F={key:1,class:"default-image"},J={class:"top-badge"},P={class:"news-content"},Q={class:"news-meta"},X={class:"news-date"},Y={class:"news-title"},q={class:"news-summary"},A={class:"news-footer"},K={class:"news-author"},O={class:"news-views"},R={class:"news-list-section"},aa={key:0,class:"section-title"},ea={class:"title-icon"},ta={class:"news-list"},sa=["onClick"],la={class:"news-image-wrapper"},ia={class:"news-image"},da=["src","alt"],na={key:1,class:"default-image"},ca={class:"news-content"},ra={class:"news-meta"},oa={class:"news-date"},va={class:"news-title"},pa={class:"news-summary"},ua={class:"news-footer"},fa={class:"news-author"},ha={class:"news-views"},ga={key:1,class:"empty-state"},wa={class:"empty-text"},ya={key:2,class:"pagination-row"},ma=a({__name:"News",setup(a){const ma=e(),ba=t(!1),xa=t([]),ka=t(""),Ca=t(""),_a=s({page:1,limit:10,total:0});let Va=null;const za=l(()=>xa.value.filter(a=>1===a.is_top)),La=l(()=>xa.value.filter(a=>0===a.is_top)),Ma=async()=>{var a;try{ba.value=!0;const e={page:_a.page,limit:_a.limit,status:"published"};Ca.value&&(e.category=Ca.value),ka.value&&(e.search=ka.value);const t=await m.get("/news",{params:e});t&&t.data&&(xa.value=t.data.news||[],_a.total=(null==(a=t.data.pagination)?void 0:a.total)||0)}catch(e){console.error("加载新闻失败:",e),b.error("加载新闻失败")}finally{ba.value=!1}},ja=()=>{Va&&clearTimeout(Va),Va=setTimeout(()=>{_a.page=1,Ma()},500)},Ba=()=>{_a.page=1,Ma()},Ha=a=>{_a.limit=a,_a.page=1,Ma()},Da=a=>{_a.page=a,Ma()},Ga=a=>{ma.push(`/news/${a.id}`)},Ua=a=>({news:"学术新闻",announcement:"活动通知",achievement:"获奖信息",activity:"学术活动"}[a]||a),Ia=a=>({news:"primary",announcement:"warning",achievement:"success",activity:"info"}[a]||""),Na=a=>{if(!a)return"";return new Date(a).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})},Sa=a=>{a.target.style.display="none"},Wa=a=>a?a.startsWith("http://")||a.startsWith("https://")||a.startsWith("/")?a:`/${a}`:"";return i(()=>{Ma()}),(a,e)=>{const t=d("el-icon"),s=d("el-input"),l=d("el-option"),i=d("el-select"),m=d("el-tag"),b=d("el-pagination"),ma=n("loading");return c(),r("div",B,[e[14]||(e[14]=o('<div class="news-header" data-v-df35ea3b><div class="header-background" data-v-df35ea3b></div><div class="container" data-v-df35ea3b><div class="header-content" data-v-df35ea3b><div class="header-icon" data-v-df35ea3b><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-df35ea3b><path d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-df35ea3b></path><path d="M3 9H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-df35ea3b></path><path d="M9 21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-df35ea3b></path></svg></div><h1 class="animate-fade-in" data-v-df35ea3b>新闻动态</h1><p class="animate-fade-in-delay" data-v-df35ea3b>了解实验室最新资讯与发展动态</p></div></div><div class="header-wave" data-v-df35ea3b><svg viewBox="0 0 1440 120" xmlns="http://www.w3.org/2000/svg" data-v-df35ea3b><path fill="#f8f9fa" d="M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z" data-v-df35ea3b></path></svg></div></div>',1)),v("div",H,[v("div",D,[v("div",G,[p(s,{modelValue:ka.value,"onUpdate:modelValue":e[0]||(e[0]=a=>ka.value=a),placeholder:"搜索新闻标题...",class:"search-input",clearable:"",onInput:ja},{prefix:u(()=>[p(t,null,{default:u(()=>[p(x(_))]),_:1})]),_:1},8,["modelValue"])]),v("div",U,[p(i,{modelValue:Ca.value,"onUpdate:modelValue":e[1]||(e[1]=a=>Ca.value=a),placeholder:"选择分类",clearable:"",class:"category-select",onChange:Ba},{default:u(()=>[p(l,{label:"学术新闻",value:"news"}),p(l,{label:"活动通知",value:"announcement"}),p(l,{label:"获奖信息",value:"achievement"}),p(l,{label:"学术活动",value:"activity"})]),_:1},8,["modelValue"])])]),za.value.length>0?(c(),r("div",I,[v("h2",N,[v("span",S,[p(t,null,{default:u(()=>[p(x(V))]),_:1})]),e[4]||(e[4]=v("span",{class:"title-text"},"置顶新闻",-1)),e[5]||(e[5]=v("span",{class:"title-line"},null,-1))]),v("div",W,[(c(!0),r(f,null,h(za.value,(a,s)=>(c(),r("div",{key:a.id,class:"news-card top-news-card animate-slide-up",style:k({animationDelay:.1*s+"s"}),onClick:e=>Ga(a)},[v("div",E,[v("div",T,[a.cover_image?(c(),r("img",{key:0,src:Wa(a.cover_image),alt:a.title,onError:Sa},null,40,$)):(c(),r("div",F,[...e[6]||(e[6]=[o('<svg class="default-icon" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" data-v-df35ea3b><defs data-v-df35ea3b><linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%" data-v-df35ea3b><stop offset="0%" style="stop-color:#667eea;stop-opacity:1;" data-v-df35ea3b></stop><stop offset="100%" style="stop-color:#764ba2;stop-opacity:1;" data-v-df35ea3b></stop></linearGradient></defs><rect width="200" height="200" fill="url(#grad1)" data-v-df35ea3b></rect><g transform="translate(50, 50)" data-v-df35ea3b><path d="M88 0H12C5.373 0 0 5.373 0 12v76c0 6.627 5.373 12 12 12h76c6.627 0 12-5.373 12-12V12c0-6.627-5.373-12-12-12zM12 88V12h76v76H12z" fill="white" opacity="0.3" data-v-df35ea3b></path><rect x="10" y="10" width="80" height="30" rx="3" fill="white" opacity="0.5" data-v-df35ea3b></rect><rect x="10" y="45" width="60" height="8" rx="2" fill="white" opacity="0.4" data-v-df35ea3b></rect><rect x="10" y="58" width="70" height="8" rx="2" fill="white" opacity="0.4" data-v-df35ea3b></rect><rect x="10" y="71" width="50" height="8" rx="2" fill="white" opacity="0.4" data-v-df35ea3b></rect></g></svg>',1)])])),e[7]||(e[7]=v("div",{class:"image-overlay"},null,-1))]),v("div",J,[p(t,null,{default:u(()=>[p(x(V))]),_:1}),e[8]||(e[8]=C(" 置顶 ",-1))])]),v("div",P,[v("div",Q,[p(m,{type:Ia(a.category),size:"small",effect:"dark"},{default:u(()=>[C(y(Ua(a.category)),1)]),_:2},1032,["type"]),v("span",X,[p(t,null,{default:u(()=>[p(x(z))]),_:1}),C(" "+y(Na(a.publish_time)),1)])]),v("h3",Y,y(a.title),1),v("p",q,y(a.summary),1),v("div",A,[v("span",K,[p(t,null,{default:u(()=>[p(x(L))]),_:1}),C(" "+y(a.author),1)]),v("span",O,[p(t,null,{default:u(()=>[p(x(M))]),_:1}),C(" "+y(a.views),1)])])])],12,Z))),128))])])):g("",!0),v("div",R,[za.value.length>0?(c(),r("h2",aa,[v("span",ea,[p(t,null,{default:u(()=>[p(x(j))]),_:1})]),e[9]||(e[9]=v("span",{class:"title-text"},"最新新闻",-1)),e[10]||(e[10]=v("span",{class:"title-line"},null,-1))])):g("",!0),w((c(),r("div",ta,[(c(!0),r(f,null,h(La.value,(a,s)=>(c(),r("div",{key:a.id,class:"news-card regular-news-card animate-slide-up",style:k({animationDelay:.05*s+"s"}),onClick:e=>Ga(a)},[v("div",la,[v("div",ia,[a.cover_image?(c(),r("img",{key:0,src:Wa(a.cover_image),alt:a.title,onError:Sa},null,40,da)):(c(),r("div",na,[...e[11]||(e[11]=[o('<svg class="default-icon" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" data-v-df35ea3b><defs data-v-df35ea3b><linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="100%" data-v-df35ea3b><stop offset="0%" style="stop-color:#3498db;stop-opacity:1;" data-v-df35ea3b></stop><stop offset="100%" style="stop-color:#2980b9;stop-opacity:1;" data-v-df35ea3b></stop></linearGradient></defs><rect width="200" height="200" fill="url(#grad2)" data-v-df35ea3b></rect><g transform="translate(50, 60)" data-v-df35ea3b><circle cx="50" cy="30" r="15" fill="white" opacity="0.4" data-v-df35ea3b></circle><path d="M10 80 L40 50 L60 70 L90 40" stroke="white" stroke-width="3" fill="none" opacity="0.5" data-v-df35ea3b></path><rect x="0" y="85" width="100" height="3" fill="white" opacity="0.3" data-v-df35ea3b></rect></g></svg>',1)])])),e[12]||(e[12]=v("div",{class:"image-overlay"},null,-1))])]),v("div",ca,[v("div",ra,[p(m,{type:Ia(a.category),size:"small",effect:"plain"},{default:u(()=>[C(y(Ua(a.category)),1)]),_:2},1032,["type"]),v("span",oa,[p(t,null,{default:u(()=>[p(x(z))]),_:1}),C(" "+y(Na(a.publish_time)),1)])]),v("h3",va,y(a.title),1),v("p",pa,y(a.summary),1),v("div",ua,[v("span",fa,[p(t,null,{default:u(()=>[p(x(L))]),_:1}),C(" "+y(a.author),1)]),v("span",ha,[p(t,null,{default:u(()=>[p(x(M))]),_:1}),C(" "+y(a.views),1)])])])],12,sa))),128))])),[[ma,ba.value]]),ba.value||0!==xa.value.length?g("",!0):(c(),r("div",ga,[e[13]||(e[13]=o('<div class="empty-icon" data-v-df35ea3b><svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" data-v-df35ea3b><circle cx="100" cy="100" r="80" fill="#f0f2f5" data-v-df35ea3b></circle><path d="M70 80 Q100 60 130 80" stroke="#d0d3d9" stroke-width="3" fill="none" data-v-df35ea3b></path><circle cx="75" cy="90" r="8" fill="#d0d3d9" data-v-df35ea3b></circle><circle cx="125" cy="90" r="8" fill="#d0d3d9" data-v-df35ea3b></circle><rect x="40" y="130" width="120" height="30" rx="5" fill="#e0e3e9" data-v-df35ea3b></rect></svg></div>',1)),v("p",wa,y(ka.value||Ca.value?"未找到匹配的新闻":"暂无新闻数据"),1)])),_a.total>0?(c(),r("div",ya,[p(b,{"current-page":_a.page,"onUpdate:currentPage":e[2]||(e[2]=a=>_a.page=a),"page-size":_a.limit,"onUpdate:pageSize":e[3]||(e[3]=a=>_a.limit=a),"page-sizes":[10,20,50],total:_a.total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:Ha,onCurrentChange:Da},null,8,["current-page","page-size","total"])])):g("",!0)])])])}}},[["__scopeId","data-v-df35ea3b"]]);export{ma as default};
