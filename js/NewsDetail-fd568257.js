import{_ as a,aa as e,af as t,h as l,i as s,m as i,r as c,j as r,o as d,a as n,b as o,k as v,e as u,w as p,d as f,t as y,X as h,F as g,g as m,I as w,f as x,J as _,l as k,Y as b,ae as G,M as C,N as M,V as z,a0 as L,x as D,Q as B,O as N}from"./index-2c03e5bc.js";const W={class:"news-detail-page"},$={class:"container"},j={class:"news-detail-content"},H={key:0,class:"news-article"},I={class:"back-navigation"},Q={class:"article-header"},T={class:"title-section"},E={class:"article-badges"},F={key:0,class:"top-badge-inline"},J={class:"article-title animate-fade-in"},O={class:"article-info"},S={class:"info-items"},V={class:"info-item"},X={class:"info-icon"},Y={class:"info-text"},q={class:"info-value"},A={class:"info-item"},K={class:"info-icon"},P={class:"info-text"},R={class:"info-value"},U={class:"info-item"},Z={class:"info-icon"},aa={class:"info-text"},ea={class:"info-value"},ta={class:"article-cover-wrapper"},la={key:0,class:"article-cover"},sa=["src","alt"],ia={key:1,class:"article-cover default-cover"},ca={key:0,class:"article-summary"},ra={class:"summary-icon"},da={class:"summary-content"},na={class:"summary-text"},oa={class:"article-content-section"},va=["innerHTML"],ua={class:"article-footer"},pa={class:"article-tags-section"},fa={class:"tags-icon"},ya={class:"tags-content"},ha={class:"article-actions"},ga={key:1,class:"related-news-section"},ma={class:"related-header"},wa={class:"related-icon"},xa={class:"related-list"},_a=["onClick"],ka={class:"related-image"},ba=["src","alt"],Ga={key:1,class:"related-default-image"},Ca={class:"related-content"},Ma={class:"related-news-title"},za={class:"related-summary"},La={class:"related-meta"},Da={class:"related-date"},Ba={class:"related-author"},Na={key:2,class:"error-state"},Wa=a({__name:"NewsDetail",setup(a){const Wa=e(),$a=t(),ja=l(!1),Ha=l(null),Ia=l([]),Qa=async()=>{try{const a=await k.get("/news",{params:{category:Ha.value.category,status:"published",limit:3}});a&&a.data&&a.data.news&&(Ia.value=a.data.news.filter(a=>a.id!==Ha.value.id).slice(0,3))}catch(a){console.error("加载相关新闻失败:",a)}},Ta=()=>{$a.push("/news")},Ea=a=>({news:"学术新闻",announcement:"活动通知",achievement:"获奖信息",activity:"学术活动"}[a]||a),Fa=a=>({news:"primary",announcement:"warning",achievement:"success",activity:"info"}[a]||""),Ja=a=>{if(!a)return"";return new Date(a).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})},Oa=a=>{a.target.style.display="none"},Sa=a=>a?a.startsWith("http://")||a.startsWith("https://")||a.startsWith("/")?a:`/${a}`:"",Va=()=>{Wa.params.id&&(async()=>{try{ja.value=!0;const a=Wa.params.id,e=await k.get(`/news/${a}`);e&&e.data&&(Ha.value=e.data,Qa())}catch(a){console.error("加载新闻详情失败:",a),b.error("加载新闻详情失败")}finally{ja.value=!1}})()};return s(()=>{Va()}),i(()=>Wa.params.id,Va),(a,e)=>{const t=c("el-icon"),l=c("el-button"),s=c("el-tag"),i=r("loading");return d(),n("div",W,[e[19]||(e[19]=o("div",{class:"page-header-decoration"},[o("div",{class:"decoration-circle circle-1"}),o("div",{class:"decoration-circle circle-2"}),o("div",{class:"decoration-circle circle-3"})],-1)),o("div",$,[v((d(),n("div",j,[Ha.value?(d(),n("div",H,[o("div",I,[u(l,{onClick:Ta,link:"",class:"back-link"},{default:p(()=>[u(t,{class:"back-icon"},{default:p(()=>[u(w(G))]),_:1}),e[0]||(e[0]=o("span",{class:"back-text"},"返回列表",-1))]),_:1})]),o("div",Q,[o("div",T,[o("div",E,[u(s,{type:Fa(Ha.value.category),size:"large",effect:"plain",class:"category-tag"},{default:p(()=>[x(y(Ea(Ha.value.category)),1)]),_:1},8,["type"]),Ha.value.is_top?(d(),n("span",F,[u(t,null,{default:p(()=>[u(w(C))]),_:1}),e[1]||(e[1]=o("span",null,"置顶",-1))])):f("",!0)]),o("h1",J,y(Ha.value.title),1)]),o("div",O,[o("div",S,[o("div",V,[o("div",X,[u(t,null,{default:p(()=>[u(w(M))]),_:1})]),o("div",Y,[e[2]||(e[2]=o("span",{class:"info-label"},"作者",-1)),o("span",q,y(Ha.value.author),1)])]),e[5]||(e[5]=o("div",{class:"info-divider"},null,-1)),o("div",A,[o("div",K,[u(t,null,{default:p(()=>[u(w(z))]),_:1})]),o("div",P,[e[3]||(e[3]=o("span",{class:"info-label"},"发布时间",-1)),o("span",R,y(Ja(Ha.value.publish_time)),1)])]),e[6]||(e[6]=o("div",{class:"info-divider"},null,-1)),o("div",U,[o("div",Z,[u(t,null,{default:p(()=>[u(w(L))]),_:1})]),o("div",aa,[e[4]||(e[4]=o("span",{class:"info-label"},"浏览量",-1)),o("span",ea,y(Ha.value.views),1)])])])])]),o("div",ta,[Ha.value.cover_image?(d(),n("div",la,[o("img",{src:Sa(Ha.value.cover_image),alt:Ha.value.title},null,8,sa),e[7]||(e[7]=o("div",{class:"cover-overlay"},null,-1))])):(d(),n("div",ia,[...e[8]||(e[8]=[h('<svg class="default-cover-svg" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg" data-v-64c8971d><defs data-v-64c8971d><linearGradient id="coverGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-64c8971d><stop offset="0%" style="stop-color:#667eea;stop-opacity:1;" data-v-64c8971d></stop><stop offset="100%" style="stop-color:#764ba2;stop-opacity:1;" data-v-64c8971d></stop></linearGradient></defs><rect width="800" height="400" fill="url(#coverGrad)" data-v-64c8971d></rect><g opacity="0.15" data-v-64c8971d><circle cx="100" cy="100" r="60" fill="white" data-v-64c8971d></circle><circle cx="700" cy="300" r="80" fill="white" data-v-64c8971d></circle><circle cx="400" cy="200" r="100" fill="white" data-v-64c8971d></circle></g><g transform="translate(300, 120)" data-v-64c8971d><rect x="0" y="0" width="200" height="160" rx="12" fill="white" opacity="0.3" data-v-64c8971d></rect><rect x="15" y="15" width="170" height="80" rx="6" fill="white" opacity="0.5" data-v-64c8971d></rect><rect x="15" y="105" width="120" height="12" rx="3" fill="white" opacity="0.4" data-v-64c8971d></rect><rect x="15" y="125" width="140" height="12" rx="3" fill="white" opacity="0.4" data-v-64c8971d></rect></g></svg>',1)])]))]),Ha.value.summary?(d(),n("div",ca,[o("div",ra,[u(t,null,{default:p(()=>[u(w(D))]),_:1})]),o("div",da,[e[9]||(e[9]=o("div",{class:"summary-label"},"内容摘要",-1)),o("p",na,y(Ha.value.summary),1)])])):f("",!0),o("div",oa,[e[10]||(e[10]=o("div",{class:"content-decorator"},[o("div",{class:"decorator-line"})],-1)),o("div",{class:"article-content",innerHTML:(k=Ha.value.content,k?k.replace(/\n/g,"<br>"):"")},null,8,va)]),o("div",ua,[o("div",pa,[o("div",fa,[u(t,null,{default:p(()=>[u(w(B))]),_:1})]),o("div",ya,[e[11]||(e[11]=o("span",{class:"tags-label"},"分类标签",-1)),u(s,{type:Fa(Ha.value.category),size:"large",effect:"plain",round:""},{default:p(()=>[x(y(Ea(Ha.value.category)),1)]),_:1},8,["type"])])]),o("div",ha,[u(l,{onClick:Ta,type:"primary",size:"large",round:""},{default:p(()=>[u(t,null,{default:p(()=>[u(w(G))]),_:1}),e[12]||(e[12]=x(" 返回列表 ",-1))]),_:1})])])])):f("",!0),Ia.value.length>0?(d(),n("div",ga,[o("div",ma,[o("div",wa,[u(t,null,{default:p(()=>[u(w(N))]),_:1})]),e[13]||(e[13]=o("h3",{class:"related-title"},"相关推荐",-1)),e[14]||(e[14]=o("div",{class:"related-line"},null,-1))]),o("div",xa,[(d(!0),n(g,null,m(Ia.value,(a,l)=>(d(),n("div",{key:a.id,class:"related-item animate-slide-up",style:_({animationDelay:.1*l+"s"}),onClick:e=>{return t=a,void $a.push(`/news/${t.id}`);var t}},[o("div",ka,[a.cover_image?(d(),n("img",{key:0,src:Sa(a.cover_image),alt:a.title,onError:Oa},null,40,ba)):(d(),n("div",Ga,[...e[15]||(e[15]=[h('<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" data-v-64c8971d><defs data-v-64c8971d><linearGradient id="relatedGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-64c8971d><stop offset="0%" style="stop-color:#3498db;stop-opacity:1;" data-v-64c8971d></stop><stop offset="100%" style="stop-color:#2980b9;stop-opacity:1;" data-v-64c8971d></stop></linearGradient></defs><rect width="100" height="100" fill="url(#relatedGrad)" data-v-64c8971d></rect><circle cx="50" cy="40" r="15" fill="white" opacity="0.3" data-v-64c8971d></circle><rect x="20" y="65" width="60" height="4" fill="white" opacity="0.4" data-v-64c8971d></rect><rect x="20" y="75" width="40" height="4" fill="white" opacity="0.3" data-v-64c8971d></rect></svg>',1)])])),e[16]||(e[16]=o("div",{class:"related-overlay"},null,-1))]),o("div",Ca,[o("h4",Ma,y(a.title),1),o("p",za,y(a.summary),1),o("div",La,[o("span",Da,[u(t,null,{default:p(()=>[u(w(z))]),_:1}),x(" "+y(Ja(a.publish_time)),1)]),o("span",Ba,[u(t,null,{default:p(()=>[u(w(M))]),_:1}),x(" "+y(a.author),1)])])])],12,_a))),128))])])):f("",!0),ja.value||Ha.value?f("",!0):(d(),n("div",Na,[e[18]||(e[18]=h('<div class="error-icon" data-v-64c8971d><svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" data-v-64c8971d><circle cx="100" cy="100" r="80" fill="#f5f5f5" data-v-64c8971d></circle><circle cx="100" cy="100" r="60" fill="#e0e0e0" data-v-64c8971d></circle><path d="M70 90 L85 75 M115 75 L130 90 M75 130 Q100 120 125 130" stroke="#999" stroke-width="4" fill="none" stroke-linecap="round" data-v-64c8971d></path></svg></div><h3 class="error-title" data-v-64c8971d>新闻不存在</h3><p class="error-message" data-v-64c8971d>抱歉，您访问的新闻可能已被删除或不存在</p>',3)),u(l,{type:"primary",size:"large",round:"",onClick:Ta},{default:p(()=>[u(t,null,{default:p(()=>[u(w(G))]),_:1}),e[17]||(e[17]=x(" 返回新闻列表 ",-1))]),_:1})]))])),[[i,ja.value]])])]);var k}}},[["__scopeId","data-v-64c8971d"]]);export{Wa as default};
