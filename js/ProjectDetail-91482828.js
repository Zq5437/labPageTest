import{_ as a,aa as s,af as e,h as l,i as t,m as c,r as i,o as n,a as d,b as o,e as r,w as u,t as v,d as p,F as f,g as m,f as _,l as g,Y as h,I as y,am as k,ae as b,N as j,T as w,ak as x,V as C,B as q,x as z,v as D,an as N,ao as F,ap as I,aq as T,ar as Y,ai as $,as as B,at as H,H as L,W as P,au as S}from"./index-37d95f7e.js";const V={class:"project-detail-page"},W={key:0,class:"loading-container"},A={class:"loading-spinner"},E={key:1,class:"project-detail-content"},G={class:"project-header"},J={class:"container"},K={class:"back-button-wrapper"},M={class:"container"},O={class:"header-content"},Q={class:"project-badges"},R={class:"project-title"},U={key:0,class:"project-title-en"},X={class:"project-quick-info"},Z={class:"quick-info-grid"},aa={class:"quick-info-item"},sa={class:"info-icon"},ea={class:"info-text"},la={class:"info-value"},ta={class:"quick-info-item"},ca={class:"info-icon"},ia={class:"info-text"},na={class:"info-value"},da={key:0,class:"quick-info-item"},oa={class:"info-icon"},ra={class:"info-text"},ua={class:"info-value"},va={class:"quick-info-item"},pa={class:"info-icon"},fa={class:"info-text"},ma={class:"info-value"},_a={class:"project-content"},ga={class:"container"},ha={class:"content-grid"},ya={class:"main-content"},ka={class:"project-cover-section"},ba={key:0,class:"project-cover"},ja=["src","alt"],wa={key:1,class:"project-cover-placeholder"},xa={class:"placeholder-pattern"},Ca={class:"pattern-grid"},qa={class:"placeholder-content"},za={class:"content-section project-description"},Da={class:"section-header"},Na={class:"section-icon"},Fa={class:"description-content"},Ia={key:0,class:"content-section project-participants"},Ta={class:"section-header"},Ya={class:"section-icon"},$a={class:"participants-content"},Ba={key:1,class:"content-section project-attachments"},Ha={class:"section-header"},La={class:"section-icon"},Pa={class:"attachments-grid"},Sa=["onClick"],Va={class:"attachment-icon"},Wa={class:"attachment-info"},Aa={class:"attachment-name"},Ea={class:"attachment-action"},Ga={class:"sidebar"},Ja={class:"info-card"},Ka={class:"card-header"},Ma={class:"info-list"},Oa={class:"info-row"},Qa={class:"label"},Ra={class:"value"},Ua={class:"info-row"},Xa={class:"label"},Za={class:"value"},as={class:"info-row"},ss={class:"label"},es={class:"value"},ls={class:"info-row"},ts={class:"label"},cs={class:"value"},is={class:"info-row"},ns={class:"label"},ds={class:"value"},os={class:"info-row"},rs={class:"label"},us={class:"value"},vs={key:0,class:"related-projects-card"},ps={class:"card-header"},fs={class:"related-list"},ms=["onClick"],_s={class:"related-image"},gs=["src","alt"],hs={key:1,class:"related-placeholder"},ys={class:"related-content"},ks={class:"related-title"},bs={class:"related-meta"},js={class:"related-arrow"},ws={key:2,class:"error-state"},xs={class:"container"},Cs={class:"error-content"},qs=a({__name:"ProjectDetail",setup(a){const qs=s(),zs=e(),Ds=l(!1),Ns=l(null),Fs=l([]),Is=()=>{const a=qs.params.id;a&&(Ts(a),Ys(a))};t(()=>{Is()}),c(()=>qs.params.id,(a,s)=>{a&&a!==s&&(window.scrollTo({top:0,behavior:"smooth"}),Is())});const Ts=async a=>{try{Ds.value=!0;const s=await g.get(`/projects/${a}`);s&&s.data&&(Ns.value=s.data)}catch(s){console.error("加载项目详情失败:",s),h.error("加载项目详情失败"),zs.push("/projects")}finally{Ds.value=!1}},Ys=async a=>{try{const s=await g.get("/projects",{params:{limit:4,exclude:a}});s&&s.data&&(Fs.value=s.data.projects||[])}catch(s){console.error("加载其他项目失败:",s)}},$s=()=>{zs.push("/projects")},Bs=a=>({national:"国家级",provincial:"省部级",institutional:"校级",enterprise:"企业合作",international:"国际合作"}[a]||a),Hs=a=>({national:"danger",provincial:"warning",institutional:"info",enterprise:"success",international:"primary"}[a]||""),Ls=a=>({ongoing:"进行中",completed:"已完成",suspended:"暂停"}[a]||a),Ps=a=>({ongoing:"success",completed:"info",suspended:"warning"}[a]||""),Ss=a=>{if(!a)return"未设定";return new Date(a).toLocaleDateString("zh-CN")};return(a,s)=>{const e=i("el-icon"),l=i("el-button"),t=i("el-tag");return n(),d("div",V,[Ds.value?(n(),d("div",W,[o("div",A,[r(e,{class:"rotating"},{default:u(()=>[r(y(k))]),_:1}),s[0]||(s[0]=o("p",null,"加载项目详情中...",-1))])])):Ns.value?(n(),d("div",E,[o("div",G,[s[5]||(s[5]=o("div",{class:"header-overlay"},null,-1)),s[6]||(s[6]=o("div",{class:"header-pattern"},null,-1)),o("div",J,[o("div",K,[r(l,{onClick:$s,class:"back-button",circle:""},{default:u(()=>[r(e,null,{default:u(()=>[r(y(b))]),_:1})]),_:1}),o("span",{class:"back-text",onClick:$s},"返回项目列表")])]),o("div",M,[o("div",O,[o("div",Q,[r(t,{type:Hs(Ns.value.category),size:"large",effect:"dark",class:"badge"},{default:u(()=>[_(v(Bs(Ns.value.category)),1)]),_:1},8,["type"]),r(t,{type:Ps(Ns.value.status),size:"large",effect:"dark",class:"badge"},{default:u(()=>[_(v(Ls(Ns.value.status)),1)]),_:1},8,["type"])]),o("h1",R,v(Ns.value.title),1),Ns.value.title_en?(n(),d("p",U,v(Ns.value.title_en),1)):p("",!0),o("div",X,[o("div",Z,[o("div",aa,[o("div",sa,[r(e,null,{default:u(()=>[r(y(j))]),_:1})]),o("div",ea,[s[1]||(s[1]=o("div",{class:"info-label"},"项目负责人",-1)),o("div",la,v(Ns.value.principal_investigator||"未设定"),1)])]),o("div",ta,[o("div",ca,[r(e,null,{default:u(()=>[r(y(w))]),_:1})]),o("div",ia,[s[2]||(s[2]=o("div",{class:"info-label"},"资助机构",-1)),o("div",na,v(Ns.value.funding_agency||"未设定"),1)])]),Ns.value.funding_amount?(n(),d("div",da,[o("div",oa,[r(e,null,{default:u(()=>[r(y(x))]),_:1})]),o("div",ra,[s[3]||(s[3]=o("div",{class:"info-label"},"资助金额",-1)),o("div",ua,v((c=Ns.value.funding_amount,c?new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0}).format(c):"0")),1)])])):p("",!0),o("div",va,[o("div",pa,[r(e,null,{default:u(()=>[r(y(C))]),_:1})]),o("div",fa,[s[4]||(s[4]=o("div",{class:"info-label"},"项目周期",-1)),o("div",ma,v(Ss(Ns.value.start_date))+" - "+v(Ss(Ns.value.end_date)),1)])])])])])])]),o("div",_a,[o("div",ga,[o("div",ha,[o("div",ya,[o("div",ka,[Ns.value.cover_image?(n(),d("div",ba,[o("img",{src:Ns.value.cover_image,alt:Ns.value.title},null,8,ja)])):(n(),d("div",wa,[o("div",xa,[o("div",Ca,[(n(),d(f,null,m(20,a=>o("div",{key:a,class:"grid-item"})),64))]),o("div",qa,[r(e,{class:"placeholder-icon"},{default:u(()=>[r(y(q))]),_:1}),s[7]||(s[7]=o("p",{class:"placeholder-text"},"暂无项目封面",-1))])])]))]),o("div",za,[o("div",Da,[o("div",Na,[r(e,null,{default:u(()=>[r(y(z))]),_:1})]),s[8]||(s[8]=o("h2",{class:"section-title"},"项目描述",-1))]),o("div",Fa,[o("p",null,v(Ns.value.description||"暂无项目描述"),1)])]),Ns.value.participants?(n(),d("div",Ia,[o("div",Ta,[o("div",Ya,[r(e,null,{default:u(()=>[r(y(D))]),_:1})]),s[9]||(s[9]=o("h2",{class:"section-title"},"参与人员",-1))]),o("div",$a,[o("p",null,v(Ns.value.participants),1)])])):p("",!0),Ns.value.attachments&&Ns.value.attachments.length>0?(n(),d("div",Ba,[o("div",Ha,[o("div",La,[r(e,null,{default:u(()=>[r(y(N))]),_:1})]),s[10]||(s[10]=o("h2",{class:"section-title"},"相关附件",-1))]),o("div",Pa,[(n(!0),d(f,null,m(Ns.value.attachments,(a,l)=>(n(),d("div",{key:l,class:"attachment-card",onClick:s=>(a=>{a.url&&window.open(a.url,"_blank")})(a)},[o("div",Va,[r(e,null,{default:u(()=>[r(y(z))]),_:1})]),o("div",Wa,[o("div",Aa,v(a.name),1),o("div",Ea,[r(e,null,{default:u(()=>[r(y(F))]),_:1}),s[11]||(s[11]=o("span",null,"下载",-1))])])],8,Sa))),128))])])):p("",!0)]),o("div",Ga,[o("div",Ja,[o("div",Ka,[r(e,{class:"card-icon"},{default:u(()=>[r(y(I))]),_:1}),s[12]||(s[12]=o("h3",{class:"card-title"},"项目信息",-1))]),o("div",Ma,[o("div",Oa,[o("span",Qa,[r(e,null,{default:u(()=>[r(y(T))]),_:1}),s[13]||(s[13]=_(" 项目编号 ",-1))]),o("span",Ra,"#"+v(Ns.value.id),1)]),o("div",Ua,[o("span",Xa,[r(e,null,{default:u(()=>[r(y(Y))]),_:1}),s[14]||(s[14]=_(" 项目类别 ",-1))]),o("span",Za,v(Bs(Ns.value.category)),1)]),o("div",as,[o("span",ss,[r(e,null,{default:u(()=>[r(y($))]),_:1}),s[15]||(s[15]=_(" 项目状态 ",-1))]),o("span",es,[r(t,{type:Ps(Ns.value.status),size:"small",effect:"dark"},{default:u(()=>[_(v(Ls(Ns.value.status)),1)]),_:1},8,["type"])])]),o("div",ls,[o("span",ts,[r(e,null,{default:u(()=>[r(y(B))]),_:1}),s[16]||(s[16]=_(" 开始时间 ",-1))]),o("span",cs,v(Ss(Ns.value.start_date)),1)]),o("div",is,[o("span",ns,[r(e,null,{default:u(()=>[r(y(B))]),_:1}),s[17]||(s[17]=_(" 结束时间 ",-1))]),o("span",ds,v(Ss(Ns.value.end_date)),1)]),o("div",os,[o("span",rs,[r(e,null,{default:u(()=>[r(y(H))]),_:1}),s[18]||(s[18]=_(" 创建时间 ",-1))]),o("span",us,v(Ss(Ns.value.created_at)),1)])])]),Fs.value.length>0?(n(),d("div",vs,[o("div",ps,[r(e,{class:"card-icon"},{default:u(()=>[r(y(L))]),_:1}),s[19]||(s[19]=o("h3",{class:"card-title"},"其他项目",-1))]),o("div",fs,[(n(!0),d(f,null,m(Fs.value,a=>(n(),d("div",{key:a.id,class:"related-item",onClick:s=>(a=>{zs.push(`/projects/${a.id}`)})(a)},[o("div",_s,[a.cover_image?(n(),d("img",{key:0,src:a.cover_image,alt:a.title},null,8,gs)):(n(),d("div",hs,[r(e,null,{default:u(()=>[r(y(q))]),_:1})]))]),o("div",ys,[o("h4",ks,v(a.title),1),o("div",bs,[r(t,{type:Hs(a.category),size:"small"},{default:u(()=>[_(v(Bs(a.category)),1)]),_:2},1032,["type"])])]),o("div",js,[r(e,null,{default:u(()=>[r(y(P))]),_:1})])],8,ms))),128))])])):p("",!0)])])])])])):(n(),d("div",ws,[o("div",xs,[o("div",Cs,[r(e,{class:"error-icon"},{default:u(()=>[r(y(S))]),_:1}),s[21]||(s[21]=o("h3",null,"项目不存在",-1)),s[22]||(s[22]=o("p",null,"该项目可能已被删除或不存在",-1)),r(l,{type:"primary",onClick:$s,class:"back-home-btn"},{default:u(()=>[r(e,null,{default:u(()=>[r(y(b))]),_:1}),s[20]||(s[20]=_(" 返回项目列表 ",-1))]),_:1})])])]))]);var c}}},[["__scopeId","data-v-13ec0c35"]]);export{qs as default};
